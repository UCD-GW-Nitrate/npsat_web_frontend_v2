(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12,9],{"+B3J":function(e,t,n){"use strict";n.r(t);n("/xke");var a=n("TeRw"),r=n("q1tI"),o=n.n(r),c=n("WHYC"),i=n("9kvl"),l=n("pssB"),s=(n("Znn+"),n("ZTPi")),u=(n("+L6B"),n("2/Rp")),m=(n("IzEo"),n("bx4M")),d=(n("cIOH"),n("jhiw"),n("TSYQ")),p=n.n(d),f=n("Zm9Q"),b=n("ACnJ"),y=n("uaoM"),h=n("H84U");function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return void 0!==e&&null!==e}var w=function(e){var t,n=e.itemPrefixCls,a=e.component,o=e.span,c=e.className,i=e.style,l=e.bordered,s=e.label,u=e.content,m=e.colon,d=a;return l?r["createElement"](d,{className:p()((t={},v(t,"".concat(n,"-item-label"),E(s)),v(t,"".concat(n,"-item-content"),E(u)),t),c),style:i,colSpan:o},E(s)?s:u):r["createElement"](d,{className:p()("".concat(n,"-item"),c),style:i,colSpan:o},s&&r["createElement"]("span",{className:p()("".concat(n,"-item-label"),v({},"".concat(n,"-item-no-colon"),!m))},s),u&&r["createElement"]("span",{className:p()("".concat(n,"-item-content"))},u))},g=w;function j(e,t,n){var a=t.colon,o=t.prefixCls,c=t.bordered,i=n.component,l=n.type,s=n.showLabel,u=n.showContent;return e.map((function(e,t){var n=e.props,m=n.label,d=n.children,p=n.prefixCls,f=void 0===p?o:p,b=n.className,y=n.style,h=n.span,v=void 0===h?1:h,E=e.key;return"string"===typeof i?r["createElement"](g,{key:"".concat(l,"-").concat(E||t),className:b,style:y,span:v,colon:a,component:i,itemPrefixCls:f,bordered:c,label:s?m:null,content:u?d:null}):[r["createElement"](g,{key:"label-".concat(E||t),className:b,style:y,span:1,colon:a,component:i[0],itemPrefixCls:f,bordered:c,label:m}),r["createElement"](g,{key:"content-".concat(E||t),className:b,style:y,span:2*v-1,component:i[1],itemPrefixCls:f,bordered:c,content:d})]}))}var x=function(e){var t=e.prefixCls,n=e.vertical,a=e.row,o=e.index,c=e.bordered;return n?r["createElement"](r["Fragment"],null,r["createElement"]("tr",{key:"label-".concat(o),className:"".concat(t,"-row")},j(a,e,{component:"th",type:"label",showLabel:!0})),r["createElement"]("tr",{key:"content-".concat(o),className:"".concat(t,"-row")},j(a,e,{component:"td",type:"content",showContent:!0}))):r["createElement"]("tr",{key:o,className:"".concat(t,"-row")},j(a,e,{component:c?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0}))},O=x,k=function(e){var t=e.children;return t},S=k,_=n("0n0R");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return D(e)||L(e,t)||P(e,t)||N()}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){if(e){if("string"===typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function L(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done);a=!0)if(n.push(c.value),t&&n.length===t)break}catch(l){r=!0,o=l}finally{try{a||null==i["return"]||i["return"]()}finally{if(r)throw o}}return n}}function D(e){if(Array.isArray(e))return e}function M(e){return M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}var A={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function B(e,t){if("number"===typeof e)return e;if("object"===M(e))for(var n=0;n<b["b"].length;n++){var a=b["b"][n];if(t[a]&&void 0!==e[a])return e[a]||A[a]}return 3}function R(e,t,n){var a=e;return(void 0===t||t>n)&&(a=Object(_["a"])(e,{span:n}),Object(y["a"])(void 0===t,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),a}function H(e,t){var n=Object(f["a"])(e).filter((function(e){return e})),a=[],r=[],o=t;return n.forEach((function(e,c){var i,l=null===(i=e.props)||void 0===i?void 0:i.span,s=l||1;if(c===n.length-1)return r.push(R(e,l,o)),void a.push(r);s<o?(o-=s,r.push(e)):(r.push(R(e,s,o)),a.push(r),o=t,r=[])})),a}function V(e){var t,n=e.prefixCls,a=e.title,o=e.column,c=void 0===o?A:o,i=e.colon,l=void 0===i||i,s=e.bordered,u=e.layout,m=e.children,d=e.className,f=e.style,y=e.size,v=r["useContext"](h["b"]),E=v.getPrefixCls,w=v.direction,g=E("descriptions",n),j=r["useState"]({}),x=I(j,2),k=x[0],S=x[1],_=B(c,k);r["useEffect"]((function(){var e=b["a"].subscribe((function(e){"object"===M(c)&&S(e)}));return function(){b["a"].unsubscribe(e)}}),[]);var N=H(m,_);return r["createElement"]("div",{className:p()(g,d,(t={},C(t,"".concat(g,"-").concat(y),y&&"default"!==y),C(t,"".concat(g,"-bordered"),!!s),C(t,"".concat(g,"-rtl"),"rtl"===w),t)),style:f},a&&r["createElement"]("div",{className:"".concat(g,"-title")},a),r["createElement"]("div",{className:"".concat(g,"-view")},r["createElement"]("table",null,r["createElement"]("tbody",null,N.map((function(e,t){return r["createElement"](O,{key:t,index:t,colon:l,prefixCls:g,vertical:"vertical"===u,bordered:s,row:e})}))))))}V.Item=S;var z=V,F=n("k1fw"),J=n("WmNS"),q=n.n(J),K=n("9og8"),Y=n("tJVT"),G=(n("FJo9"),n("L41K")),U=n("Hx5s"),Q=n("LtsZ"),W=Object(Q["dynamic"])({loader:function(){return Object(K["a"])(q.a.mark((function e(){var t,a;return q.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(5),n.e(16)]).then(n.bind(null,"KBTt"));case 2:return t=e.sent,a=t.default,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()}}),Z=Object(Q["dynamic"])({loader:function(){return Object(K["a"])(q.a.mark((function e(){var t,a;return q.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(0),n.e(5),n.e(15)]).then(n.bind(null,"vIVl"));case 2:return t=e.sent,a=t.default,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))()}}),X=n("+n12"),$=n("r1Ps"),ee=n("fX4H"),te=n("qnQ4"),ne=(n("bMVF"),n("6K1h"),function(e){var t=e.data;return o.a.createElement($["a"],{center:[38.5816,-121.4944],zoom:6},o.a.createElement(ee["a"],{key:t.length,data:t,onEachFeature:function(e,t){t.bindTooltip(e.properties.name)}}),o.a.createElement(te["a"],{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}))}),ae=ne,re=(n("g9YV"),n("wCAj")),oe=n("oBTY"),ce=function(e){return o.a.createElement(re["a"],{dataSource:Object(oe["a"])(e.data),loading:e.loading,columns:[{title:"Crops",dataIndex:"name",key:"name",sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:"Loading percentage",dataIndex:"proportion",key:"proportion",render:function(e){return"".concat(Math.round(100*parseFloat(e)),"%")},sorter:function(e,t){return parseFloat(e.proportion)-parseFloat(t.proportion)}}],rowKey:function(e){return e.crop},pagination:!1})},ie=ce,le=n("t3Un");function se(e,t){return ue.apply(this,arguments)}function ue(){return ue=Object(K["a"])(q.a.mark((function e(t,n){return q.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(le["a"])("/api/model_run/".concat(t.id,"/"),{method:"GET",headers:{Authorization:"Token ".concat(n)},data:{id:t.id}}));case 1:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function me(e){return de.apply(this,arguments)}function de(){return de=Object(K["a"])(q.a.mark((function e(t){return q.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(le["a"])("/api/region/".concat(t.id,"/"),{method:"GET"}));case 1:case"end":return e.stop()}}),e)}))),de.apply(this,arguments)}function pe(e){return fe.apply(this,arguments)}function fe(){return fe=Object(K["a"])(q.a.mark((function e(t){return q.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(le["a"])("/api/crops/".concat(t.id,"/"),{method:"GET"}));case 1:case"end":return e.stop()}}),e)}))),fe.apply(this,arguments)}function be(e,t){return ye.apply(this,arguments)}function ye(){return ye=Object(K["a"])(q.a.mark((function e(t,n){return q.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(le["a"])("/api/model_results/".concat(t,"/"),{headers:{Authorization:"Token ".concat(n)},method:"GET"}));case 1:case"end":return e.stop()}}),e)}))),ye.apply(this,arguments)}var he=n("xVbb"),ve=n.n(he),Ee=G["a"].Step,we=function(e){var t=e.id,n=e.token,a=Object(r["useState"])({}),c=Object(Y["a"])(a,2),l=c[0],d=c[1],f=Object(r["useState"])([]),b=Object(Y["a"])(f,2),y=b[0],h=b[1],v=Object(r["useState"])(0),E=Object(Y["a"])(v,2),w=E[0],g=E[1],j=Object(r["useState"])([]),x=Object(Y["a"])(j,2),O=x[0],k=x[1],S=Object(r["useState"])(!0),_=Object(Y["a"])(S,2),C=_[0],I=_[1],N=Object(r["useState"])({}),P=Object(Y["a"])(N,2),T=P[0],L=P[1],D=Object(r["useState"])([]),M=Object(Y["a"])(D,2),A=M[0],B=M[1];Object(r["useEffect"])((function(){Object(K["a"])(q.a.mark((function e(){var a;return q.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,se({id:t},n);case 2:a=e.sent,d(a),a.complete?g(3):a.running?g(2):a.ready&&g(1);case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(r["useEffect"])((function(){l.regions&&Promise.all(l.regions.map((function(e){return me({id:e.id})}))).then((function(e){h(e)})),l.modifications&&Promise.all(l.modifications.map((function(e){return pe({id:e.crop})}))).then((function(e){var t=[];e.forEach((function(e,n){var a=e.name;t.push(Object(F["a"])(Object(F["a"])({},l.modifications[n]),{},{name:a}))})),k(t),I(!1)})),l.results&&Promise.all(l.results.map((function(e){return be(e.id,n)}))).then((function(e){var t={};e.forEach((function(e){t[e.percentile]=e.values.map((function(t,n){return{year:1945+n,value:t,percentile:"".concat(Object(X["c"])(e.percentile)," percentile")}}))})),B(e.map((function(e){return e.percentile}))),L(t)}))}),[l]);var R=o.a.createElement("div",{className:p()(ve.a.textSecondary,ve.a.stepDescription)},l.date_submitted?new Date(l.date_submitted).toLocaleString():""),H=l.date_completed?o.a.createElement("div",{className:p()(ve.a.textSecondary,ve.a.stepDescription)},new Date(l.date_completed).toLocaleString()):null;return o.a.createElement(U["b"],null,o.a.createElement("div",{className:ve.a.main},o.a.createElement(m["a"],{title:"Model info",bordered:!1,style:{marginBottom:32}},o.a.createElement(z,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},o.a.createElement(z.Item,{label:"Model name"},l.name),o.a.createElement(z.Item,{label:"Date created"},l.date_submitted?new Date(l.date_submitted).toLocaleString():""),o.a.createElement(z.Item,{label:"Date completed"},l.date_completed?new Date(l.date_completed).toLocaleString():"not yet completed"),o.a.createElement(z.Item,{label:"Number of years to predict"},l.n_years),o.a.createElement(z.Item,{label:"Reduction year"},l.reduction_year),o.a.createElement(z.Item,{label:"Water content"},"".concat(100*l.water_content,"%")),o.a.createElement(z.Item,{label:"Scenario"},l.scenario&&l.scenario.name||""),o.a.createElement(z.Item,{label:"Region(s)",span:3},y.map((function(e){return e.name})).join(", ")||""),o.a.createElement(z.Item,{label:"Number of wells detected in selected region(s)"},l.n_wells||"model run not yet finishes"),o.a.createElement(z.Item,{label:"Status message",span:3},l.status_message||"no message"),o.a.createElement(z.Item,{label:"Model description",span:3},l.description||"no description"))),o.a.createElement(m["a"],{title:"Model progress",style:{marginBottom:32},bordered:!1,extra:o.a.createElement(u["a"],{type:"link",disabled:!l.complete,onClick:function(){i["b"].push({pathname:"/charts",query:{id:l.id}})}},"View combined model results")},o.a.createElement(U["d"].Consumer,null,(function(e){var t=e.isMobile;return o.a.createElement(G["a"],{direction:t?"vertical":"horizontal",progressDot:!0,current:w},o.a.createElement(Ee,{title:"Model created",description:R}),o.a.createElement(Ee,{title:"Ready"}),o.a.createElement(Ee,{title:"Running"}),o.a.createElement(Ee,{title:"Completed",description:H}))}))),0===A.length?null:o.a.createElement(m["a"],{title:"Run result",style:{marginBottom:32},bordered:!1},o.a.createElement(s["a"],{tabPosition:"top",centered:!0},o.a.createElement(s["a"].TabPane,{tab:"Line Plot",key:"LP"},o.a.createElement(W,{percentiles:A,data:T,reductionYear:l.reduction_year})),o.a.createElement(s["a"].TabPane,{tab:"Area Plot",key:"AP"},o.a.createElement(Z,{percentiles:A,data:T,reductionYear:l.reduction_year})))),o.a.createElement(m["a"],{title:"Crop details",bordered:!1,style:{marginBottom:32}},o.a.createElement(ie,{data:O,loading:C})),o.a.createElement(m["a"],{title:"Region Map",bordered:!1},y?o.a.createElement(ae,{data:y.map((function(e){return e.geometry}))}):null)))},ge=we,je=function(e){var t=Object(c["k"])(),n=e.token,s=t.query.id,u=void 0===s?null:s;return Object(r["useEffect"])((function(){null===u&&(a["a"].warn({message:"Please choose a model to view details",description:"No model specified"}),i["b"].push({pathname:"/model/overview"}))}),[u]),u?o.a.createElement(ge,{id:u,token:n}):o.a.createElement(l["default"],null)};t["default"]=Object(i["a"])((function(e){var t=e.user;return{token:t.currentUser.token}}))(je)},"6K1h":function(e,t,n){},jhiw:function(e,t,n){},pssB:function(e,t,n){"use strict";n.r(t);n("J+/v");var a=n("MoRW"),r=(n("+L6B"),n("2/Rp")),o=n("q1tI"),c=n.n(o),i=n("9kvl"),l=function(){return c.a.createElement(a["a"],{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:c.a.createElement(r["a"],{type:"primary",onClick:function(){return i["b"].push("/")}},"Back Home")})};t["default"]=l},xVbb:function(e,t,n){e.exports={main:"main___1mp0O",headerList:"headerList___LGb6i",stepDescription:"stepDescription___3TRUQ",pageHeader:"pageHeader___2wVyh",moreInfo:"moreInfo___1IqgK"}}}]);