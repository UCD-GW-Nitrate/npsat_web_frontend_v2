(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{gUIs:function(e,t,a){"use strict";a.r(t);a("qVdP");var n=a("jsC+"),r=(a("lUTK"),a("BvKs")),c=(a("P2fV"),a("NJEC")),i=(a("/zsF"),a("PArb")),o=(a("5Dmo"),a("3S7+")),u=(a("+L6B"),a("2/Rp")),l=a("tJVT"),s=a("WmNS"),d=a.n(s),p=(a("miYZ"),a("tsqr")),m=a("9og8"),f=a("xvlK"),h=a("8Skl"),v=a("q1tI"),w=a.n(v),y=a("9kvl"),b=a("/MKj"),k=a("Hx5s"),E=a("Qiat"),x=a("t3Un");function g(e,t){return T.apply(this,arguments)}function T(){return T=Object(m["a"])(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=20,e.abrupt("return",Object(x["a"])("/api/model_run",{headers:{Authorization:"Token ".concat(a)},params:{limit:t.pageSize,offset:n*(t.current-1)}}));case 2:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function D(e,t){return j.apply(this,arguments)}function j(){return j=Object(m["a"])(d.a.mark((function e(t,a){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(x["a"])("/api/model_run/".concat(t.id),{method:"DELETE",headers:{Authorization:"Token ".concat(a)}}));case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}var O=function(){var e=Object(m["a"])(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!0);case 2:for(n=function(e){var n=p["a"].loading("Deleting ".concat(t[e].name,"..."));D({id:t[e].id},a).catch((function(){n(),p["a"].error("Model ".concat(t[e].name," deletion failed"))})).then((function(){p["a"].success("Model ".concat(t[e].name," deleted")),n()}))},r=0;r<t.length;r++)n(r);return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),C=function(e){var t="";e.forEach((function(e){t+="".concat(e.id," ")})),y["b"].push({pathname:"/charts",query:{id:encodeURI(t)}})},R=function(){y["b"].push("/model/create")},I=function(e){var t=e.results;return t.forEach((function(e){e.complete?e.status=3:e.running?e.status=2:e.ready?e.status=1:e.status=0,e.key=e.id})),{data:t,total:e.count}},S=function(e){y["b"].push({pathname:"/charts",query:{id:e}})},M=function(e){y["b"].push({pathname:"/model/view",query:{id:e}})},_=function(){var e=Object(m["a"])(d.a.mark((function e(t,a,n){var r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=p["a"].loading("Deleting..."),e.prev=1,e.next=4,D({id:t},a);case 4:r(),p["a"].success("Model deleted. Refreshing..."),n.current.reload(),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),r(),p["a"].error("Model deletion failed, please try again");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),q=function(e){var t=e.userToken,a=Object(v["useState"])(""),s=Object(l["a"])(a,2),p=s[0],y=s[1],b=Object(v["useRef"])(),x=[{title:"Model Name",dataIndex:"name",valueType:"textarea"},{title:"Description",dataIndex:"description",valueType:"textarea"},{title:"Status",dataIndex:"status",valueEnum:{0:{text:"Unknown",status:"Error"},1:{text:"Ready",status:"Default"},2:{text:"Pending",status:"Processing"},3:{text:"Complete",status:"Success"}}},{title:"Date Created",dataIndex:"date_submitted",sorter:function(e,t){return new Date(e.date_submitted)>new Date(t.date_submitted)},valueType:"dateTime"},{title:"Date Completed",dataIndex:"date_completed",sorter:function(e,t){return new Date(e.date_completed)>new Date(t.date_completed)},valueType:"dateTime"},{title:"Action",dataIndex:"option",valueType:"option",render:function(e,a){return w.a.createElement(w.a.Fragment,null,w.a.createElement(o["a"],{title:"view details and modify model"},w.a.createElement(u["a"],{type:"link",onClick:function(){return M(a.id)}},"Details")),w.a.createElement(i["a"],{type:"vertical"}),w.a.createElement(o["a"],{title:"view plots"},w.a.createElement(u["a"],{type:"link",disabled:3!==a.status,onClick:function(){return S(a.id)}},"Results")),w.a.createElement(i["a"],{type:"vertical"}),w.a.createElement(c["a"],{title:"Are you sure deleting this model?",okText:"Yes",cancelText:"No",onConfirm:function(){return _(a.id,t,b)}},w.a.createElement(o["a"],{title:"delete model"},w.a.createElement(u["a"],{type:"link",danger:!0},"Delete"))))}}];return w.a.createElement(k["b"],null,w.a.createElement(E["a"],{value:E["c"]},w.a.createElement(E["b"],{headerTitle:"Model Overview",actionRef:b,rowKey:"key",onChange:function(e,t,a){var n=a;n.field&&y("".concat(n.field,"_").concat(n.order))},params:{sorter:p},toolBarRender:function(e,a){var c=a.selectedRows;return[w.a.createElement(u["a"],{type:"primary",onClick:R},w.a.createElement(f["a"],null)," New Model"),c&&c.length>0&&w.a.createElement(n["a"],{overlay:w.a.createElement(r["a"],{onClick:function(){var a=Object(m["a"])(d.a.mark((function a(n){return d.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("remove"!==n.key){a.next=6;break}return a.next=3,O(c,t);case 3:e.reload(),a.next=7;break;case 6:C(c);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),selectedKeys:[]},w.a.createElement(r["a"].Item,{key:"remove"},"Delete models"),w.a.createElement(r["a"].Item,{key:"plot"},"View results"))},w.a.createElement(u["a"],null,"Batch Operation ",w.a.createElement(h["a"],null)))]},tableAlertRender:function(e){var t=e.selectedRowKeys;e.selectedRows;return w.a.createElement("div",null,"Selected"," ",w.a.createElement("a",{style:{fontWeight:600}},t.length)," ","Model(s)\xa0\xa0")},request:function(e){return g(e,t).then(I)},columns:x,rowSelection:{},search:!1,pagination:{showSizeChanger:!1,pageSize:20}})))};t["default"]=Object(b["c"])((function(e){var t=e.user;return{userToken:t.currentUser.token}}))(q)}}]);