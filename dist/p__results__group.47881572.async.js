(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13,8],{RE2d:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("WmNS"),r=a.n(n),c=a("9og8"),s=a("t3Un");function l(e,t){return o.apply(this,arguments)}function o(){return o=Object(c["a"])(r.a.mark((function e(t,a){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])("/api/model_run/".concat(t.id,"/"),{method:"GET",headers:{Authorization:"Token ".concat(a)},data:{id:t.id}}));case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}},dkfA:function(e,t,a){"use strict";a.r(t);var n=a("WmNS"),r=a.n(n),c=a("9og8"),s=a("tJVT"),l=a("q1tI"),o=a.n(l),i=a("WHYC"),u=a("9kvl"),d=a("pssB"),m=(a("RE2d"),a("sRBo"),a("kaz8")),p=(a("Awhp"),a("KrTs")),f=(a("14J3"),a("BMrR")),b=(a("OaEy"),a("2fM7")),h=(a("jCWc"),a("kPKH")),E=(a("y8nQ"),a("Vl3Y")),g=(a("5NDa"),a("5rEg")),y=(a("+L6B"),a("2/Rp")),v=a("k1fw"),w=(a("5Dmo"),a("3S7+")),x=(a("+BJd"),a("mr32")),k=a("l+S1"),j=a("/MKj"),O=a("LQCs"),S=a("Qiat"),R=a("Hx5s"),I=a("xHr7"),T=a("tcq8"),_=function(e){var t,a=e.value,n=e.closable,r=e.onClose;switch(a){default:case"original":t="volcano";break;case"public":t="geekblue";break;case"base":t="green"}return o.a.createElement(x["a"],{color:t,closable:n,onClose:r,style:{marginRight:3}},a)},C=function(e,t){var a=e.results,n=[];return a.forEach((function(e){var a=e;a.key=a.id,a.scenario_name=a.scenario.name,a.tags=[],a.public&&a.tags.push("public"),a.isBase&&a.tags.push("base"),a.user===t&&a.tags.push("original"),n.push(a)})),{data:n,total:e.count}},D=function(e){var t=e.title,a=void 0===t?"Custom models group comparison":t,n=e.subTitle,r=void 0===n?"Select up to 5 models to compare and view together.":n,c=e.user,i=Object(l["useContext"])(R["d"]),d=i.isMobile,m=Object(l["useRef"])(),p=[{title:"Name",dataIndex:"name",fixed:"left",copyable:!0,ellipsis:d,width:d?100:200},{title:"Description",dataIndex:"description",ellipsis:!0,width:250},{title:"Scenario",dataIndex:"scenario_name",copyable:!0,width:150},{title:"Status",dataIndex:"status",valueEnum:{0:{text:"Not ready",status:"Warning"},1:{text:"In queue",status:"Default"},2:{text:"Running",status:"Processing"},3:{text:"Complete",status:"Success"},4:{text:"Error",status:"Error"}},width:100},{title:"Year range",dataIndex:"n_years",render:function(e){return"1945 - ".concat(1945+e)},sorter:function(e,t){return e>t}},{title:"Reduction year",dataIndex:"reduction_year",sorter:function(e,t){return e>t}},{title:"Water content",dataIndex:"water_content",render:function(e){return"".concat(100*e,"%")},sorter:function(e,t){return e>t}},{title:"Date Created",dataIndex:"date_submitted",sorter:function(e,t){return new Date(e.date_submitted)>new Date(t.date_submitted)},render:function(e){return new Date(e).toLocaleString()}},{title:"Date Completed",dataIndex:"date_completed",sorter:function(e,t){return new Date(e.date_completed)>new Date(t.date_completed)},render:function(e){return new Date(e).toLocaleString()}},{title:"Types",key:"tags",dataIndex:"tags",render:function(e,t){return o.a.createElement("span",null,e.map((function(e){var a,n;switch(e){default:case"original":a="volcano",n="created by you";break;case"public":a="geekblue",n="accessible by everyone";break;case"base":a="green",n="base model of ".concat(t.scenario.name)}return o.a.createElement(w["a"],{title:n,key:t.key+e},o.a.createElement(x["a"],{color:a,key:e},e))})))}}],f=Object(l["useState"])({types:["public","original","base"],search_text:"",scenarios:[],status:[0,1,2,3,4]}),b=Object(s["a"])(f,2),h=b[0],E=b[1],g=Object(l["useState"])(""),k=Object(s["a"])(g,2),j=k[0],T=k[1],_=Object(l["useState"])([]),D=Object(s["a"])(_,2),B=(D[0],D[1],function(e){E(Object(v["a"])({},e)),m.current.reload()});return o.a.createElement(R["b"],{title:a,subTitle:r,content:o.a.createElement(W,{onSearch:B}),extra:o.a.createElement(y["a"],{href:"/charts/compare",type:"primary",onClick:function(){u["b"].push({path:"/charts/compare"})}},"Switch to base model comparison")},o.a.createElement(O["a"],{value:{intl:O["c"]}},o.a.createElement(S["a"],{actionRef:m,headerTitle:"Search results",scroll:{x:"max-content"},rowKey:"id",columns:p,bordered:!0,onChange:function(e,t,a){var n=a;n.order?T("".concat(n.field,",").concat(n.order)):T("")},tableAlertRender:function(e){var t=e.selectedRowKeys;return o.a.createElement("div",null,"Selected \xa0",o.a.createElement("a",{style:{fontWeight:600,color:t.length>5?"red":"#1890ff"}},t.length),"\xa0 Model(s). Maximum of"," ",o.a.createElement("a",{style:{fontWeight:600,color:t.length>5?"red":"#1890ff"}},"5")," ",".")},toolBarRender:function(e,t){var a=t.selectedRowKeys;return[o.a.createElement(w["a"],{title:function(){return 0===a.length?"Start select models.":1===a.length?"Select more models for comparison.":a.length>5?"Too much models selected.":"Confirm and compare models."}},o.a.createElement(y["a"],{type:"primary",disabled:a.length<=1||a.length>5},"Compare in groups"))]},request:function(e){return Object(I["a"])(e,h.types,c.token,h.search_text,j,h.scenarios,h.status).then((function(e){return C(e,c.user_id)}))},rowSelection:{},search:!1})))},W=function(e){var t=e.onSearch,a=Object(l["useState"])([]),n=Object(s["a"])(a,2),i=n[0],u=n[1];return Object(l["useEffect"])((function(){Object(c["a"])(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["a"])();case 2:t=e.sent,a=t.results,u(a);case 5:case"end":return e.stop()}}),e)})))()}),[]),o.a.createElement(E["a"],{style:{marginTop:20},onFinish:t,hideRequiredMark:!0},o.a.createElement(f["a"],{gutter:16},o.a.createElement(h["a"],{flex:"auto"},o.a.createElement(E["a"].Item,{label:"Name/Description",name:"search_text"},o.a.createElement(g["a"],{placeholder:"Search by model name or description"}))),o.a.createElement(h["a"],{xs:24,sm:8},o.a.createElement(E["a"].Item,{label:"Model types",name:"types",initialValue:["public","original","base"]},o.a.createElement(b["a"],{mode:"multiple",showArrow:!0,placeholder:"Select model types",style:{width:"100%"},tagRender:_,options:[{label:"include public models",value:"public"},{label:"include self-created models",value:"original"},{label:"include base scenario models",value:"base"}]})))),o.a.createElement(f["a"],{gutter:24},o.a.createElement(h["a"],{xs:24,sm:16},o.a.createElement(E["a"].Item,{name:"scenarios",label:"Scenarios"},o.a.createElement(b["a"],{mode:"multiple",showArrow:!0,placeholder:"Filter scenarios",style:{width:"100%"},optionFilterProp:"children"},i.map((function(e){return o.a.createElement(b["a"].Option,{key:e.id,value:e.id},e.name)}))))),o.a.createElement(h["a"],{xs:24,sm:8},o.a.createElement(E["a"].Item,{label:"Status",name:"status",valuePropName:"checked",initialValue:["0","1","2","3","4"],rules:[{required:!0,message:"You must select at least one status"}]},o.a.createElement(m["a"].Group,{style:{width:"100%"},defaultValue:["0","1","2","3","4"]},o.a.createElement(f["a"],null,o.a.createElement(h["a"],{span:8},o.a.createElement(m["a"],{value:"0"},o.a.createElement(p["a"],{text:"Not ready",status:"warning"}))),o.a.createElement(h["a"],{span:8},o.a.createElement(m["a"],{value:"1"},o.a.createElement(p["a"],{text:"In queue",status:"default"}))),o.a.createElement(h["a"],{span:8},o.a.createElement(m["a"],{value:"2"},o.a.createElement(p["a"],{text:"Running",status:"processing"}))),o.a.createElement(h["a"],{span:8},o.a.createElement(m["a"],{value:"3"},o.a.createElement(p["a"],{text:"Complete",status:"success"}))),o.a.createElement(h["a"],{span:8},o.a.createElement(m["a"],{value:"4"},o.a.createElement(p["a"],{text:"Error",status:"error"})))))))),o.a.createElement(f["a"],null,o.a.createElement(h["a"],{span:24},o.a.createElement(E["a"].Item,{style:{margin:0}},o.a.createElement(y["a"],{type:"primary",htmlType:"submit",style:{float:"right"}},o.a.createElement(k["a"],null),"Search")))))},B=Object(j["c"])((function(e){var t=e.user;return{user:t.currentUser}}))(D),q=function(e){var t=Object(i["k"])(),a=e.user,n=(a.token,Object(l["useState"])({})),u=Object(s["a"])(n,2),m=u[0],p=u[1],f=t.query.ids,b=void 0===f?null:f;return Object(l["useEffect"])((function(){null!==b&&Object(c["a"])(r.a.mark((function e(){var t;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=[],"string"===typeof t&&t.startsWith("ERROR")?p({error:t}):p(t);case 2:case"end":return e.stop()}}),e)})))()}),[b]),b?m.error?o.a.createElement(d["default"],{subTitle:"One are more models you selected are inaccessible",title:"The model you look for is private or cannot be found",redirection:"/charts/group",buttonText:"Select models"}):null:o.a.createElement(B,null)};t["default"]=Object(u["a"])((function(e){var t=e.user;return{user:t.currentUser}}))(q)},pssB:function(e,t,a){"use strict";a.r(t);a("J+/v");var n=a("MoRW"),r=(a("+L6B"),a("2/Rp")),c=a("q1tI"),s=a.n(c),l=a("9kvl"),o=function(e){var t=e.redirection,a=void 0===t?"/":t,c=e.title,o=void 0===c?"404":c,i=e.subTitle,u=void 0===i?"Sorry, the page you visited does not exist.":i,d=e.buttonText,m=void 0===d?"Back Home":d;return s.a.createElement(n["a"],{status:"404",title:o,subTitle:u,extra:s.a.createElement(r["a"],{type:"primary",onClick:function(){return l["b"].push(a)}},m)})};t["default"]=o},tcq8:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("WmNS"),r=a.n(n),c=a("9og8"),s=a("t3Un");function l(){return o.apply(this,arguments)}function o(){return o=Object(c["a"])(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])("/api/scenario/"));case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}},xHr7:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("WmNS"),r=a.n(n),c=a("k1fw"),s=a("9og8"),l=a("t3Un");function o(e,t,a,n){return i.apply(this,arguments)}function i(){return i=Object(s["a"])(r.a.mark((function e(t,a,n,s){var o,i,u,d,m,p,f,b,h,E=arguments;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(o=t.pageSize,i=t.current,u=E.length,d=new Array(u>4?u-4:0),m=4;m<u;m++)d[m-4]=E[m];return p=d[0],f=d[1],b=d[2],h={},s&&0!==s.trim().length&&(h.search=s),p&&0!==p.length&&(h.sorter=p),f&&f.length>0&&(h.scenarios=f.join(",")),h.status=b?b.join(","):"3",e.abrupt("return",Object(l["a"])("/api/model_run",{headers:{Authorization:"Token ".concat(n)},params:Object(c["a"])({limit:o,offset:o*(i-1),public:a.includes("public"),isBase:a.includes("base"),origin:a.includes("original"),status:"3"},h)}));case 9:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}}}]);